datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id         Int       @id @default(autoincrement())
  username   String    @unique
  profilePic String? // store path or URL e.g. "src/assets/profile1.jpg"
  posts      Post[]    @relation("UserPosts")
  comments   Comment[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Post {
  id        Int      @id @default(autoincrement())
  caption   String?
  image     String // path or URL, e.g. "src/assets/post1.jpg"
  likes     Int      @default(0)
  timestamp DateTime

  author   User @relation("UserPosts", fields: [authorId], references: [id])
  authorId Int

  comments Comment[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Comment {
  id     Int   @id @default(autoincrement())
  // if you want comments to reference a registered user:
  user   User? @relation(fields: [userId], references: [id])
  userId Int?

  // Keep original commenter name (useful when commenter is not in Users table)
  username String?

  comment String
  post    Post   @relation(fields: [postId], references: [id])
  postId  Int

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
